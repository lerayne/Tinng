==Описание интерфейса аякс-диалога==

На клиенте весь движок информационного обмена содержится в файле (тип устройства)_content.js. В нем содержится
функция startEngine, запускаемая после полной загрузки DOM и построения базового интерфейса. startEngine 
запускает циклический ожидающий ajax-ротатор (rotor), перезапускающий сам себя каждые 10 секунд, или 
принудительно. 

Главный параметр, который ротатор передает на сервер - timestamp последнего изменения, зафиксированного на 
клиенте. Первоначально этот парамтер равен 0 и сервер возвращает все записи, сделанные с начала unix-эпохи, 
а также новую максимальную дату, которая фиксируется в переменной клиента и в дальнейшем используется ротатором 
для получения более новых изменений. Кроме того, ротатор передает id текущей выбранной темы (при загрузке он 
либо отсутствует, либо извлекается из хеша URL), параметры фильтрации тем и сортировки. 

Вот перечень переменных, передаваемых всегда:

maxdateTS - тот самый опорный параметр, дата последнего изменения. По умолчанию 0.
curTopic - текущая выбранная тема. По умолчанию равна пустой строке.
topicSort - сортировка тем. По умолчанию - updated, то есть по времени последнего обновления.
tsReverse - порядок сортировки тем - прямой или обратный. По умолчанию обратный, что в сочетании с предыдущим 
            параметром дает сортировку "новые сверху".

В ранних альфа-версиях версиях программы для вытяжки обновлений с сервера и для отправки новых данных 
использовались разные команды. Ротатор останавливался, отправлялось новое сообщение, которое добавлялось в базу, 
а затем ротатор снова запускался. Естественно, он находил новые сообщения и загружал их. 
В новой версии схема была упрощена. Для отправки нового контента на сервер текущий таймер отсчета до следующего 
запроса ротатора сбрасывается, а затем ротатор запускается снова, с дополнительными параметрами, включающими в 
себя новые данные. Последовательность запись-чтение выполняется на сервере за 1 проход скрипта и ротатор тут же 
возвращает уже извлеченные из базы записи. Таким образом, ротатор можете передавать еще 2 опциональных параметра:

write - указание типа записи (что изменяем/добавляем/удляем)
params - коллекция данных для записи


==============================================================================================================

Возможные ошибки в архитектуре:

1. Поле topic_name в таблице сообщений должно содержать пустую строку для всех сообщений без темы, иначе 
(~300-я строка update.php) данная тема будет расценена как удаленная. Такое поведение нелогично и может привести 
к путанице.